1. Add Stock Movement Log (very useful later)

Create a new collection / table, e.g. stock_movements:

Fields suggestion:

id

product_id

type â†’ "IN" | "OUT"

reason â†’ "ADMIN_ADJUST" | "ORDER_PLACED" | "ORDER_CANCELLED" | "RETURN" ...

quantity â†’ number (+ for IN, - for OUT)

previous_stock

new_stock

created_at

created_by (admin id, optional)

Backend:

Whenever you:

Add stock from admin

Reduce stock because of an order

You also insert a row into stock_movements.

ğŸ‘‰ This helps you debug â€œwhy stock became 5 instead of 20?â€ in the future.

Admin UI (optional for now but good):

/admin/inventory/stock-history

Filter by product

Table like: Date | Product | Type | Qty | Old â†’ New | Reason

You can also show "Last 5 stock movements" under each product row later.

ğŸ§‘â€ğŸ’» Step 2 â€“ Customers Management (Minimal but REAL)

You can keep this simple for now, but itâ€™s important.

2.1. Add Customers List in Admin (/admin/customers)

Backend:

Create an endpoint like:

GET /api/admin/customers


Return fields like:

id

name

phone

email

totalOrders

totalSpent

hasActiveSubscription (true/false)

createdAt

status (ACTIVE, BLOCKED etc. â€“ optional)

You can compute totalOrders and totalSpent either:

On the fly (aggregate from orders table)

Or store in customer document and update when new order is placed

Admin UI:

Table:

| Name | Phone | Email | Total Orders | Total Spent | Subscription | Joined | Action |

Action later can show â€œView detailsâ€ (customer profile page).

ğŸ§¾ Step 3 â€“ Orders Admin (Core Step Now)

This is the most important next piece.

3.1. Orders Table in Admin (/admin/orders)

Backend endpoint:

GET /api/admin/orders


Return:

orderId

customer â†’ name, phone

items â†’ [ { productId, name, quantity, unitPrice, totalPrice } ]

totalAmount

paymentStatus â†’ "PENDING" | "PAID" | "FAILED"

orderStatus â†’ "PENDING" | "CONFIRMED" | "OUT_FOR_DELIVERY" | "DELIVERED" | "CANCELLED"

createdAt

deliveryDate

deliverySlot

address (short version)

Admin UI:

Table:

| Order ID | Customer | Amount | Payment | Status | Date | Actions |

Click row or â€œViewâ€ â†’ open side panel / modal:

Show full details (items, address, notes, etc.)

Buttons:

Change order status (Pending â†’ Confirmed â†’ Delivered)

Change payment status (Pending â†’ Paid)

Cancel order

3.2. Endpoint to Update Order Status
PUT /api/admin/orders/:id/status
body: { status: "CONFIRMED" | "DELIVERED" | "CANCELLED" }

3.3. âš™ï¸ Connect Orders to Stock (Very Important)

Rule:

When order is confirmed â†’ reduce stock

When order is cancelled after confirmation â†’ restore stock

You can implement logic like:

if (status changes FROM 'PENDING' TO 'CONFIRMED') {
  for each item in order:
    product.stock -= item.quantity
    save product
    insert stock_movement OUT
}

if (status changes FROM 'CONFIRMED' TO 'CANCELLED') {
  for each item in order:
    product.stock += item.quantity
    save product
    insert stock_movement IN (reason: 'ORDER_CANCELLED')
}


ğŸ“Œ Very important: only update stock when status changes, not every time the order is edited.

ğŸ¥› Step 4 â€“ Subscriptions (Basic Admin View)

Donâ€™t build full complex logic yet. Just visibility first.

4.1. Subscription Model

Fields suggestion:

id

customerId

productId (for now, just milk)

quantity (e.g. 1 litre)

frequency â†’ "DAILY" | "WEEKLY" | "MONTHLY"

deliveryTimeSlot

startDate

isActive

nextDeliveryDate

4.2. Admin Endpoint
GET /api/admin/subscriptions


Return:

Customer name / phone

Product name

Quantity

Frequency

Next delivery date

Active/Inactive

Admin UI:

Table:

| Customer | Product | Qty | Frequency | Next Delivery | Status |

Later you can add:

Pause / Resume subscription

Change quantity

ğŸ“Š Step 5 â€“ Dashboard Stats (Using Above)

Once Products + Customers + Orders + Subscriptions are wired, you can show real numbers on /admin/dashboard:

Total products

Total customers

Total orders

Total revenue

Active subscriptions

Low stock products (e.g. stock < 10)

Todayâ€™s orders / todayâ€™s revenue